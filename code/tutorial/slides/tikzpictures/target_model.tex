%\usetikzlibrary{bayesnet}
%\input{./bayesnetex.tex}

\begin{tikzpicture}

\tikzstyle{mylatent} = [circle,fill=white,draw=black,inner sep=1pt,
minimum size=30pt, thick]
\tikzstyle{myobs} = [circle,fill=gray!25,draw=black,inner sep=1pt,
minimum size=30pt, thick]

\node[mylatent] (u0) {$u_0$};
\node[mylatent, right=1 cm of u0] (u1) {$u_{1}$};
\node[mylatent, right=1 cm of u1] (u2) {$u_{2}$};
%\node[mylatent, right=2 cm of u2] (un) {$u_{n}$};

\node[myobs, below=1 cm of u0] (x0) {$x_0$};
\node[myobs, right=1 cm of x0] (x1) {$x_{1}$};
\node[myobs, right=1 cm of x1] (x2) {$x_{2}$};
\node[myobs, right=2 cm of x2] (xn) {$x_{n}$};

%\node[paramnode, left=1 cm of x0] (px0) {$$};
%\edge {px0} {x0}; 

\edge {x0} {x1};
\edge {x1} {x2}; 
\draw [dashed, ->] (x2) edge (xn);

\edge {u0} {x1}; 
\edge {u1} {x2}; 
\draw [dashed, ->] (u2) edge (xn);

\edge {x0} {u1}; 
\edge {x1} {u2}; 

\edge {u0} {u1}; 
\edge {u1} {u2}; 

\edge {x0} {u0}; 
\edge {x1} {u1}; 
\edge {x2} {u2}; 

\node[myobs, above=1 cm of u0] (target) {$T$};
\edge {target} {u0, u1, u2}; 

\node[paramnode, left=1 cm of u0] (pu0) {$$};
\edge {pu0} {u0};

\node[mylatent, above left=1 cm of u0] (policy) {$\pi$};

\edge {policy} {u0, u1, u2};

\node[paramnode, above=1 cm of policy] (ppolicy) {$$};
\edge {ppolicy} {policy};

\node [right=0.5cm of u2] {current control};

\end{tikzpicture}

